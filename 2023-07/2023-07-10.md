# 운영체제의 역할과 구조

운영체제는 응용 프로그램과 시스템 자원을 제어하고 관리한다. 운영체제의 궁극적인 목표는 사용자에게 편리성을 제공하고, 컴퓨터 시스템 자원을 효율적으로 운영하는데 있다.

- 시스템 자원(System Resources) 관리자: 컴퓨터 하드웨어를 관리
- 사용자와 컴퓨터 간 커뮤니케이션을 지원
- 하드웨어와 응용 프로그램(Application)을 제어

운영체제는 커널과 인터페이스로 이루어짐

- 커널(Kernel): 프로세스 관리, 메모리 관리, 저장장치 관리 등 운영체제의 핵심적인 기능을 모아놓은 것으로 운영체제의 성능을 결정
- 인터페이스(Interface): 사용자 명령을 전달하고 실행 결과를 사용자에게 알려줌

- 인터페이스(GUI) -> System Call -> 커널

# 시스템 콜(System Call)

- 시스템 호출 인터페이스로도 불리며 프로그램의 직접적인 시스템 자원에 접근을 막고 커널을 보호하기 위해 만들어짐
- 즉, 운영체제 기능을 호출하는 함수
- 사용자 영역과 커널 영역 사이에 위치에 두 영역의 다리 역할을 한다
  - 사용자 모드 -> 시스템 콜 호출 -> 커널 모드

# 프로세스 스케줄링

## 배치 처리 시스템(Batch Processing System)

- 일괄 처리 시스템이라고도 부른다
- 컴퓨터 프로그램 실행 요청 순서에 따라 순차적으로 프로그램을 실행하는 방식
  - 자료구조 Queue와 비슷하게 동작한다. 먼저 들어간 작업이 먼저 처리되는 FIFO 방식으로 프로그램이 실행된다.
- 한번에 등록된 여러 프로그램을 순차적으로 실행시킬 수 있다
- 하나의 응용 프로그램이 시스템 자원을 독점해 효율적으로 시스템 자원을 사용할 수 있다

## 시분할 시스템(Time Sharing System)

- 다중 사용자 지원을 위해 컴퓨터 응답 시간을 최소화하는 시스템
  - **핵심 아이디어는 CPU의 작업 시간을 쪼갠다는 것이다**
  - 응답 시간: 시스템에 조회를 요구한 직후부터, 응답이 시작되는 때까지 경과된 총 시간
  - 시분할 시스템은 **컴퓨터를 대화식으로 사용**하려는 시도에서 탄생
  - 여러 사용자가 사용하는 시스템에서 컴퓨터가 사용자들의 프로그램을 번갈아가며 처리해줘 각 사용자에게 독립된 컴퓨터를 사용하는 느낌을 줌
  - **CPU의 전체 사용시간을 작은 작업 시간량으로 쪼개어 그 시간량 동안만 번갈아가면서 CPU를 할당하여 각 작업을 처리**
  - **프로세스(process)**: 메모리에 적재되어 실행중인 프로그램
  - Round Robin 방식이라고도 부름

## 멀티 태스킹(Multi Tasking)

- 단일 CPU

  에서 여러 응용 프로그램이 동시에 실행(병렬 실행)되는 것처럼 보이도록 하는 시스템

  - 10 ~ 20ms 단위로 계속해서 실행되는 응용 프로그램이 바뀜

- Task가 하나의 프로세스 상에서 OS 스케쥴링 방식에 따라 조금씩 번갈아가면서 수행

  - $Thread \in Process, Task \in Task$, Task는 OS 스케쥴링의 기본 단위로 운영체제는 Task 단위로 일을 나누어 시스템을 만든다.
  - 멀티 태스킹의 스케쥴링 방식
  - 멀티 프로그래밍(Multi Programming)
  - 시분할 방식(Time Sharing)
  - 실시간 시스템 방식(Real Time)

- 비선점형 멀티 태스킹: CPU를 점유하고 있는 쓰레드가 더 이상 점유할 필요가 없음을 알릴 때 까지 CPU를 점유하고 있는 방식

  - OS가 중간에 점유권을 뺏지 못함

- 선점형 멀티 태스킹: 운영체제가 타이머나 트리거를 통해 개입해 강제로 CPU 점유를 빼앗아 올 수 있는 방식

  - OS가 중간에 점유권을 뺏을 수 있음
  - 현대의 OS 대부분은 선점형 멀티 태스킹 방식을 채택함

- CPU를 선점하고 있는 시간의 단위를 **퀀텀**이라 하며, 퀀텀이 너무 낮으면 스위칭 비용이 커지고, 퀀텀이 너무 높으면 반응 속도가 느려진다.

## 멀티 프로세싱(Multi Processing)

- **여러 CPU**에 하나의 프로그램을 병렬로 실행해서 실행속도를 극대화시키는 시스템
- 여러 개의 프로세스가 서로 협력적으로(병렬) 일을 처리한다
  - 한 CPU가 여러 작업에 참여한다

- 단일 프로세스보다 비용이 절약될 수 있다
  - 프로세스가 주변장치, 대용량 저장장치, 전원 공급장치등을 서로 공유하고 있기 때문
- 여러 프로세스에 적절히 분산되면 한 프로세스가 작동하지 않아도 시스템이 정지 되지 않는다

## 멀티 프로그래밍(Multi Programming)

- 하나의 프로세서가 하나의 프로세스를 수행하는 동안 다른 프로세스에 접근할 수 있도록 하는 방법
  - 프로세서(processor): 컴퓨터 내에서 프로그램을 수행하는 하드웨어 유닛, **CPU**
  - 프로세스(process): 메모리에 적재되어 실행 중이거나 대기 중인 **프로그램**
- 최대한 CPU를 많이 활용하도록 설계된 시스템
  - 시간 대비 CPU 활용도를 높인다. 즉, CPU를 쉬지 않고 돌린다
  - 응용 프로그램을 짧은 시간 안에 실행 완료 시킬 수 있다
- 응답 시간도 짧게 만들어 다중 사용자 지원
- 하나의 작업이 I/O 작업, 저장 작업 등으로 이동하는 즉시 운영 체제는 해당 작업을 중단하고 작업 풀(대기열)에서 다른 작업을 선택하고 이 새 작업에 CPU를 제공하고 실행을 시작